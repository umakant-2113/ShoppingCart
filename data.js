let productData = [
  {
    brand: 'Puma',
    name: 'selena floral FileList',
    price: '2000',
    size: 'X,XX,XXL',
    productID: 'women1',
    catagory: 'casual',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/t/w/twentydressesmix_dr0935_1_984da863.jpg?rnd=20200526195200',
  },
  {
    brand: 'Gap',
    name: 'balck bella',
    price: '1347',
    size: 'X,M,L,XX,XXL',
    productID: 'women2',
    catagory: 'festive',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/1/4/146117301_1_7fcd0574.jpg?rnd=20200526195200',
  },
  {
    brand: 'Puma',
    name: 'chil pill supersoft palysuit',
    price: '799',
    size: 'M,L,XX,XXS',
    productID: 'women3',
    catagory: 'party',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/c/achwsivc466_1_a6c9da54.jpg?rnd=20200526195200',
  },
  {
    brand: 'Gap',
    name: 'plus size womens',
    price: '2000',
    size: 'X,M,L,XXS,XXL',
    productID: 'women4',
    catagory: 'formal',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/i/n/ind158-pnk_1_3dc181e4.jpg?rnd=20200526195200',
  },
  {
    brand: 'Bady Moo',
    name: 'balck bella',
    price: '1347',
    size: 'X,M,L',
    productID: 'women5',
    catagory: 'workout',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/p/h/pheeta-pht0067_1_96256fbd.jpg?rnd=20200526195200',
  },
  {
    brand: 'Pepe jeans',
    name: 'plus size womens',
    price: '979',
    size: 'XXS,M,L',
    productID: 'women6',
    catagory: 'travel',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/o/_/o_228327501_1_857abfa6.jpg?rnd=20200526195200',
  },
  {
    brand: 'Puma',
    name: 'chil pill supersoft palysuit',
    price: '2000',
    size: 'XXL,M,L',
    productID: 'women7',
    catagory: 'sports',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/t/w/twentydressesmix_dr0769_1_90caf4b3.jpg?rnd=20200526195200',
  },
  {
    brand: 'Gap',
    name: 'chil pill supersoft palysuit',
    price: '1347',
    size: 'X,M,L,XX',
    productID: 'women8',
    catagory: 'casual',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/k/a/kazo-123019black_1_85f6e006.jpg?rnd=20200526195200',
  },
  {
    brand: 'Bady Moo',
    name: 'balck bella',
    price: '976',
    size: 'XS,M,L,XX',
    productID: 'women9',
    catagory: 'festive',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/r/t/rtor0011_1_67335460.jpg?rnd=20200526195200',
  },
  {
    brand: 'Gap',
    name: 'woman cotton off white',
    price: '456',
    size: 'X,L,XX',
    productID: 'women10',
    catagory: 'party',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/h/ahtufrgfe19523_1_e0416277.jpg?rnd=20200526195200',
  },
  {
    brand: 'Bee bay',
    name: 'woman cotton off white',
    price: '986',
    size: 'M,L,XXS',
    productID: 'women11',
    catagory: 'formal',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/c/achwkea595-1_dc090828.jpg?rnd=20200526195200',
  },
  {
    brand: 'Kaniroot',
    name: 'chill pill supersoft',
    price: '567',
    size: 'S,M,L,XXl',
    productID: 'women12',
    catagory: 'workout',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/2/3/238451501_1_43bf9c90.jpg?rnd=20200526195200',
  },
  {
    brand: 'Bee bay',
    name: 'Curev multi-Color',
    price: '765',
    size: 'S,X,L,XXl',
    productID: 'women13',
    catagory: 'travel',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/r/t/rtor0011_1_67335460.jpg?rnd=20200526195200',
  },
  {
    brand: 'Gap',
    name: 'Mega striple',
    price: '9999',
    size: 'S,M,X,XXL',
    productID: 'women14',
    catagory: 'sports',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/o/_/o_119512401_1_e2d71be7.jpg?rnd=20200526195200',
  },
  {
    brand: 'Puma',
    name: 'balck bella',
    price: '1347',
    size: 'S,M,X,XXL',
    productID: 'women15',
    catagory: 'casual',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/1/4/146117301_1_7fcd0574.jpg?rnd=20200526195200',
  },
  {
    brand: 'Kaniroot',
    name: 'chil pill supersoft palysuit',
    price: '799',
    size: 'S,M,L,XXL',
    productID: 'women16',
    catagory: 'festive',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/c/achwsivc466_1_a6c9da54.jpg?rnd=20200526195200',
  },
  {
    brand: 'Puma',
    name: 'plus size womens',
    price: '2000',
    size: 'S,XX',
    productID: 'women17',
    catagory: 'party',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/i/n/ind158-pnk_1_3dc181e4.jpg?rnd=20200526195200',
  },
  {
    brand: 'Gap',
    name: 'balck bella',
    price: '1347',
    size: 'S,M,XX,XXL',
    productID: 'women18',
    catagory: 'formal',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/p/h/pheeta-pht0067_1_96256fbd.jpg?rnd=20200526195200',
  },
  {
    brand: 'Bee bay',
    name: 'plus size womens',
    price: '979',
    size: 'M,XXL,XX',
    productID: 'women19',
    catagory: 'workout',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/o/_/o_228327501_1_857abfa6.jpg?rnd=20200526195200',
  },
  {
    brand: 'Puma',
    name: 'chil pill supersoft palysuit',
    price: '2000',
    size: 'M,X,L,XXL',
    productID: 'women20',
    catagory: 'travel',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/t/w/twentydressesmix_dr0769_1_90caf4b3.jpg?rnd=20200526195200',
  },
  {
    brand: 'Puma',
    name: 'chil pill supersoft palysuit',
    price: '1347',
    size: 'M,L,XXL',
    productID: 'women21',
    catagory: 'sport',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/k/a/kazo-123019black_1_85f6e006.jpg?rnd=20200526195200',
  },
  {
    brand: 'Gap',
    name: 'balck bella',
    price: '976',
    size: 'S,XX',
    productID: 'women22',
    catagory: 'casual',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/r/t/rtor0011_1_67335460.jpg?rnd=20200526195200',
  },
  {
    brand: 'Puma',
    name: 'woman cotton off white',
    price: '456',
    size: 'XXL',
    productID: 'women23',
    catagory: 'festive',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/h/ahtufrgfe19523_1_e0416277.jpg?rnd=20200526195200',
  },
  {
    brand: 'Gap',
    name: 'woman cotton off white',
    price: '986',
    size: 'S,X,L',
    productID: 'women24',
    catagory: 'party',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/c/achwkea595-1_dc090828.jpg?rnd=20200526195200',
  },
  {
    brand: 'Kaniroot',
    name: 'chill pill supersoft',
    price: '567',
    size: 'S,XXL,XX',
    productID: 'women25',
    catagory: 'formal',
    img: 'https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/2/3/238451501_1_43bf9c90.jpg?rnd=20200526195200',
  },
];

let root = document.getElementById('root');
let input = document.querySelector('input');
let selectBrand = document.getElementById('select');
let opt = document.querySelector('opt');
let form = document.querySelector('#form');
console.log(input);

let arr = [];

// filter by catagory

let brandName = productData.map((elm) => {
  return elm.catagory.toLocaleLowerCase();
});
let brandSelector = Array.from(new Set(brandName));
brandSelector.map((elm, index) => {
  let opt = document.createElement('option');
  opt.innerText = elm;
  opt.value = elm;
  opt.setAttribute('data-id', index);
  selectBrand.append(opt);
});

createUi(productData);

let brandNameSelect = document.getElementById('select');
createUi(productData);
brandNameSelect.addEventListener('click', (event) => {
  let value = event.target.value;
  console.log(value);
  let data = productData.filter((elm) => {
    if (value !== undefined) {
      if (elm.catagory == value) {
        return elm;
      }
    }
  });
  // createUi(productData)
  createUi(data);
  // event.target.value=""
});

// filter by search bar

function handleSearch(event) {

  if (event.keyCode == 13) {
    let value = event.target.value;
    console.log(value);
    if (value !== '') {
      let searchData = productData.filter((elm) => {
        if (elm.catagory.includes(value)) {
          return elm;
          console.log(elm);
        }
      });
      createUi(searchData);
      //  event.target.value=""
    }
  }
}
input.addEventListener('keyup', handleSearch);

// filter by price

let price = document.getElementById('price');

price.addEventListener('click', (event) => {
  let value = event.target.value;
  if (value === 'Low to high') {
    let data = productData.sort((a, b) => a.price - b.price);
    createUi(data);
  } else if (value === 'High to low') {
    let data = productData.sort((a, b) => b.price - a.price);
    createUi(data);
  } else {
    createUi(productData);
  }
});

// filter by size
let sizeSelector = document.getElementById('size');
let sizeArray = [];
let str = '';

for (let item of productData) {
  sizeArray.push(item.size.split(','));
}
let sizeValue = sizeArray.flat(Infinity);
let sizeData = Array.from(new Set(sizeValue));

sizeData.map((elm) => {
  let option = document.createElement('option');
  option.value = elm;

  option.innerText = elm;
  sizeSelector.append(option);
});

sizeSelector.addEventListener('click', (event) => {
  if (event.target.value !== '') {
    let filterBySize = productData.filter((elm) => {
      if (elm.size.includes(event.target.value)) {
        return elm;
      }
    });
    createUi(filterBySize);
  }
});

// filter by brand
let AllbrandName = [];

for (let item of productData) {
  AllbrandName.push(item.brand);
}
let uniqueBrand = AllbrandName.filter((elm, index) => {
  if (AllbrandName.indexOf(elm) == index) {
    return elm;
  }
});

let selectBrandElement = document.getElementById('brand');

uniqueBrand.map((elm) => {
  let option = document.createElement('option');

  option.value = elm;
  option.innerText = elm;
  selectBrandElement.append(option);
});

selectBrandElement.addEventListener('click', (event) => {
  let value = event.target.value;

  if (value !== '') {
    let brandFilterdData = productData.filter((elm) => {
      if (elm.brand.includes(value)) {
        return elm;
      }
    });
    createUi(brandFilterdData);
  }
});

// create ui of applications

function createUi(arr) {
  root.innerHTML = '';

  arr.map((elm, index) => {
    let div = document.createElement('div');
    div.classList.add('box');

    let img = document.createElement('img');
    img.src = elm.img;
    img.classList.add('img');

    let div2 = document.createElement('div');
    div2.classList.add('div2-data');

    let brand = document.createElement('h2');
    brand.innerText = elm.brand;

    let name = document.createElement('h3');
    name.innerText = elm.name;

    let price = document.createElement('p');
    price.innerText = '$' + ' ' + elm.price;
    price.classList.add('category-price');

    let category = document.createElement('p');
    category.innerText = elm.catagory;
    category.classList.add('category-p');

    let size = document.createElement('p');
    size.innerText = elm.size;

    let button = document.createElement('button');
    button.id = index;
    button.innerText = 'Add Cart';
    button.classList.add('btn');

    button.addEventListener('click', () => {
      handle(elm);
    });

    div2.append(brand, name, price, category, size, button);
    div.append(img, div2);
    root.append(div);
  });
}

// local storage

let cart = JSON.parse(localStorage.getItem('data')) || [];

function handle(elm) {
  cart.push(elm);

  localStorage.setItem('data', JSON.stringify(cart));
}

// send to next page
let h2= document.querySelector(".cart-h2")
h2.addEventListener("click",(event)=>{
  window.location.href="cart.html"
})